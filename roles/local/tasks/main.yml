---
- include: linux.yml
  when: ansible_os_family == "RedHat" or ansible_os_family == "Debian"

- include: mac.yml
  when: ansible_os_family == "Darwin"

- name: Install programs
  package: name={{ item }}
  with_items:
    - lastpass-cli
    - "{{ 'python2-flake8' if ansible_os_family == 'RedHat' else 'flake8' }}"
  become: "{{ package_become }}"

- name: Install Atom packages
  apm:
    name: "{{ item }}"
  with_items:
    - language-ocaml
    - language-r
    - language-rust
    - language-vala-modern
    - linter
    - linter-flake8
    - linter-lintr
    - linter-rust
    - ocaml-indent
    - ocaml-merlin
    - rustfmt
